{% extends "base.html" %}
{% block content %}
<div class="container">
  <h3>Editar Nota de Consulta</h3>
  <form method="POST">
    {{ form.hidden_tag() }}

    <!-- Mostrar paciente como referencia -->
    <div class="mb-3">
      <label><strong>Paciente:</strong></label>
      <p>{{ paciente.nombre if paciente else "Sin paciente" }}</p>
    </div>

    <!-- Consulta -->
    <div class="mb-3">
      {{ form.id_consulta.label }}
      {{ form.id_consulta(class="form-control") }}
    </div>

    <!-- Servicio -->
    <div class="mb-3">
      {{ form.id_servicio.label }}
      {{ form.id_servicio(class="form-control") }}
    </div>

    <!-- Fecha y hora -->
    <div class="row">
      <div class="col-md-6 mb-3">
        {{ form.fecha.label }}
        {{ form.fecha(class="form-control") }}
      </div>
      <div class="col-md-6 mb-3">
        {{ form.hora.label }}
        {{ form.hora(class="form-control") }}
      </div>
    </div>

    <!-- Signos vitales -->
    <div class="row">
      <div class="col-md-3 mb-3">{{ form.peso.label }} {{ form.peso(class="form-control") }}</div>
      <div class="col-md-3 mb-3">{{ form.talla.label }} {{ form.talla(class="form-control") }}</div>
      <div class="col-md-3 mb-3">{{ form.imc.label }} {{ form.imc(class="form-control", readonly=true) }}</div>
      <div class="col-md-3 mb-3">{{ form.ta.label }} {{ form.ta(class="form-control") }}</div>
    </div>

    <div class="row">
      <div class="col-md-3 mb-3">{{ form.fc.label }} {{ form.fc(class="form-control") }}</div>
      <div class="col-md-3 mb-3">{{ form.fr.label }} {{ form.fr(class="form-control") }}</div>
      <div class="col-md-3 mb-3">{{ form.temp.label }} {{ form.temp(class="form-control") }}</div>
      <div class="col-md-2 mb-3">{{ form.cc.label }} {{ form.cc(class="form-control", placeholder="cm") }}</div>
      <div class="col-md-3 mb-3">{{ form.spo2.label }} {{ form.spo2(class="form-control") }}</div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">{{ form.glicemia.label }} {{ form.glicemia(class="form-control") }}</div>
      <div class="col-md-6 mb-3">{{ form.cc.label }} {{ form.cc(class="form-control") }}</div>
    </div>

    <!-- Texto largo SOAP -->
    <div class="mb-3">
      {{ form.presentacion.label }}
      {{ form.presentacion(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.antecedentes.label }}
      {{ form.antecedentes(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.exploracion_fisica.label }}
      {{ form.exploracion_fisica(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.diagnostico.label }}
      {{ form.diagnostico(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.plan.label }}
      {{ form.plan(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.pronostico.label }}
      {{ form.pronostico(class="form-control", rows=3) }}
    </div>
    <div class="mb-3">
      {{ form.laboratorio.label }}
      {{ form.laboratorio(class="form-control", rows=3) }}
    </div>

    <!-- BotÃ³n -->
    <div class="mb-3">
      <button type="submit" class="btn btn-success">Guardar cambios</button>
      <a href="{{ url_for('medicos.ver_nota', id_nota=nota.id_nota) }}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
